id: https://czid.org/entities/schema/platformics
title: CZID Platformics Bio-Entities Schema
name: platformics
default_range: string

types:
  string:
    uri: xsd:string
    base: str
    description: A character string

  integer:
    uri: xsd:integer
    base: int
    description: An integer

  uuid:
    uri: xsd:string
    base: str
    description: A UUID

enums:
  FileStatus:
    permissible_values:
      SUCCESS:
        description: This file has been uploaded and validated successfully
      FAILED:
        description: This file failed to upload or failed validation
      PENDING:
        description: This file is a placeholder and awaiting a successful upload
  FileAcessProtocol:
    permissible_values:
      s3:
        description: This file is accessible via the (AWS) S3 protocol
  Nucleotide:
    permissible_values:
      RNA:
        description: DNA nucleotide
      DNA:
        description: RNA nucleotide
  SequencingProtocol:
    permissible_values:
      MNGS:
        description: Metagenomics sequencing read
      TARGETED:
        description: Targeted (amplified via primers) sequencing read
      MSSPE:
        description: MSSPE Sequencing Read
 
classes:
  Entity:
    attributes:
      id:
        identifier: true
        range: uuid
      type:
        range: string
        required: true
        designates_type: true
      producing_run_id:
        range: int
        minimum_value: 0
      owner_user_id:
        range: int
        minimum_value: 0
      collection_id:
        range: int
        minimum_value: 0
 
  File:
    attributes:
      id:
        identifier: true
        range: uuid
      entity_field_name:
        range: string
        required: true
      entity:
        range: Entity
        required: true
      status:
        range: FileStatus
        required: true
      protocol:
        range: FileAccessProtocol
        required: true
      namespace:
        range: string
        required: true
      path:
        range: string
        required: true
      file_format:
        range: string
        required: true
      compression_type:
       range: string
      size:
        range: int
        minimum_value: 0

  Sample:
    is_a: Entity
    attributes:
      name:
        required: true
      location:
        required: true
      sequencing_reads:
        range: SequencingRead
        multivalued: true
        inverse: SequencingRead.sample

  SequencingRead:
    is_a: Entity
    attributes:
      nucleotide:
        range: Nucleotide
        required: true
      sequence:
        range: string
        pattern: "^[AGTCUN]+$"
        required: true
      protocol:
        range: SequencingProtocol
        required: true
      sequence_file_id:
      sample:
        range: Sample
        inverse: Sample.sequencing_reads

  Contig:
    is_a: Entity
    attributes:
      sequencing_read_id:
        required: true
      sequence:
        required: true
